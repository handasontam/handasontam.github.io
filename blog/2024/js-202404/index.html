<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Solution to the 2024 April Jane Street Puzzles | Handason's Blog </title> <meta name="author" content="Da Sun Handason Tam"> <meta name="description" content="Solution to the 2024 April Jane Street Puzzles"> <meta name="keywords" content="blog, puzzle, board-game, ultralight, minimalism"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9D%9B%87&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://handasontam.github.io/blog/2024/js-202404/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class=" "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm sticky-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Handason's Blog </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Solution to the 2024 April Jane Street Puzzles</h1> <p class="post-meta"> Created in May 01, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/puzzles"> <i class="fa-solid fa-hashtag fa-sm"></i> puzzles</a>   ·   <a href="/blog/category/puzzles"> <i class="fa-solid fa-tag fa-sm"></i> puzzles</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Puzzle link: <a href="https://www.janestreet.com/puzzles/robot-capture-the-flag-index/" rel="external nofollow noopener" target="_blank">https://www.janestreet.com/puzzles/robot-capture-the-flag-index/</a></p> <blockquote> <p>Two robots, Aaron and Erin, have made it to this year’s final! Initially they are situated at the center of a unit circle. A flag is placed somewhere inside the circle, at a location chosen uniformly at random. Once the flag is placed, Aaron is able to deduce its distance to the flag, and Erin is only able to deduce its direction to the flag. (Equivalently: if (r, θ) are the polar coordinates of the flag’s location, Aaron is told r and Erin is told θ.)</p> <p>Both robots are allowed to make a single move after the flag is placed, if they wish. Any move they make is without knowledge of what the other robot is doing. (And they may not move outside the circle.)</p> <p>Whichever robot is closer to the flag after these moves captures the flag and is declared the winner!</p> <p>During the preliminaries it was discovered that Erin is programmed to play a fixed distance along the detected angle θ. Assuming otherwise optimal play by both robots, can you determine the probability that Aaron will win? (Please express your answer to 10 decimal places.)</p> </blockquote> <h2 id="solution-approach">Solution Approach</h2> <p>To solve this puzzle, we’ll follow these steps:</p> <ol> <li>Determine Aaron’s optimal strategy.</li> <li>Calculate Aaron’s win probability as a function of Erin’s fixed distance.</li> <li>Find Erin’s optimal fixed distance.</li> <li>Compute the final win probabilities.</li> </ol> <h3 id="1-aarons-optimal-strategy">1. Aaron’s Optimal Strategy</h3> <p>Let’s define some variables:</p> <ul> <li>\(r_E\): Erin’s fixed movement distance</li> <li>\(r\): The actual distance to the flag (known to Aaron)</li> <li>\(r_A(r)\): Aaron’s chosen movement distance</li> <li>\(\theta_A(r)\): Aaron’s chosen movement angle</li> </ul> <p>Since Aaron doesn’t know the flag’s direction, his best strategy is to choose \(\theta_A(r)\) uniformly at random: \(\theta_A(r) \sim U(0, 2\pi)\).</p> <p>To win, Aaron must end up closer to the flag than Erin. This occurs when his final position falls within a circle centered at the flag’s location, with radius \(\lvert r_E - r\rvert\).</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/js-202404-0.png" sizes="95vw"></source> <img src="/assets/img/js-202404-0.png" class="img-fluid rounded z-depth-1" width="40%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>To maximize his chances, Aaron should choose \(r_A\) such that it forms a right triangle with \(\lvert r_E-r\rvert\) and \(r\):</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/js-202404-1.png" sizes="95vw"></source> <img src="/assets/img/js-202404-1.png" class="img-fluid rounded z-depth-1" width="40%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Why? Imagine \(r_A\) rotates around the origin, comparing to other choice of \(r_A\), this choice ensures the locus enters this region earliest and leaving it latest, and thus maximizing the probability Aaron stays in this region. Therefore, by the Pythagorean theorem, we have: \(r_A(r) = \sqrt{r^2-\lvert r_E-r\rvert^2} = \sqrt{r_E(2r-r_E)}\) when \(r^2 \geq \lvert r_E-r\rvert^2\), or equivalently, \(r \geq \frac{r_E}{2}\). What if \(r &lt; \frac{r_E}{2}\)? In this case, Aaron gurantees a win by staying at the center (i.e. choosing \(r_A = 0\)), as his distance to the flag (\(r\)) will always be less than Erin’s (\(\lvert r_E-r\rvert\)). Now, we have successfully derived the best response of Aaron:</p> \[r_A(r) = \begin{cases} \sqrt{r_E(2r-r_E)} &amp; \text{if } r \geq \frac{r_E}{2} \\ 0 &amp; \text{if } r &lt; \frac{r_E}{2} \end{cases}\] <h3 id="2-aarons-win-probability">2. Aaron’s Win Probability</h3> <p>Given Aaron’s optimal strategy, we can express his win probability as a function of \(r_E\):</p> \[\begin{align} P(\text{Aaron wins}) &amp;= \int_{r_E/2}^{1} \frac{2r}{π} \arccos\left(\frac{\sqrt{r_E (2r - r_E)}}{r}\right) dr + \int_{0}^{r_E/2} 2r dr \\ &amp;= \int_{r_E/2}^{1} \frac{2r}{π} \arccos\left(\frac{\sqrt{r_E (2r - r_E)}}{r}\right) dr + \frac{r_E^2}{4} \end{align}\] <h3 id="3-erins-optimal-strategy">3. Erin’s Optimal Strategy</h3> <p>Knowing Aaron’s win probability, Erin would choose \(r_E\) to minimize Aaron’s win probability. At this point, we can use numerical solver to minimize the above function with respect to \(r_E\). (Side note: I initially spent a considerable amount of time attempting to solve this problem analytically. After several unsuccessful attempts, I realized that a closed-form solution wasn’t necessary for this particular problem. This experience serves as a reminder that sometimes, recognizing when to pivot to numerical methods can save time and effort in problem-solving.)</p> <h3 id="4-numerical-solution">4. Numerical Solution</h3> <p>Using Python with SciPy for numerical integration and optimization:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">scipy.integrate</span> <span class="k">as</span> <span class="n">integrate</span>
<span class="kn">import</span> <span class="n">scipy.special</span> <span class="k">as</span> <span class="n">special</span>
<span class="kn">from</span> <span class="n">scipy.optimize</span> <span class="kn">import</span> <span class="n">minimize_scalar</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">r_1</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">integrate</span><span class="p">.</span><span class="nf">quad</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="mi">2</span><span class="o">*</span><span class="n">r</span><span class="o">/</span><span class="n">np</span><span class="p">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="nf">arccos</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">r_1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">r</span> <span class="o">-</span> <span class="n">r_1</span><span class="p">))</span><span class="o">/</span><span class="n">r</span><span class="p">),</span> <span class="n">r_1</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">epsabs</span><span class="o">=</span><span class="mf">1e-30</span><span class="p">,</span> <span class="n">epsrel</span><span class="o">=</span><span class="mf">1e-30</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">r_1</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span>

<span class="n">res</span> <span class="o">=</span> <span class="nf">minimize_scalar</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="sh">'</span><span class="s">bounded</span><span class="sh">'</span><span class="p">)</span>


<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Erwin should choose r_1 = </span><span class="sh">"</span><span class="p">,</span> <span class="n">res</span><span class="p">.</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># 0.5013067075684123
</span><span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">The best response of Aaron is to choose r_2 = 0 if r &lt; (r_1)/2 and choose r_2 = sqrt(r_1 * (2r - r_1)) if (r_1)/2 &lt; r &lt; 1</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Erwin</span><span class="sh">'</span><span class="s">s win probability is </span><span class="sh">"</span><span class="p">,</span> <span class="mi">1</span><span class="o">-</span><span class="n">res</span><span class="p">.</span><span class="n">fun</span><span class="p">)</span>  <span class="c1"># 0.8338135135259306
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Aaron</span><span class="sh">'</span><span class="s">s win probability is </span><span class="sh">"</span><span class="p">,</span> <span class="n">res</span><span class="p">.</span><span class="n">fun</span><span class="p">)</span>  <span class="c1"># 0.16618648647406942
</span></code></pre></div></div> <p>The result shows that at equilibrium, Erin would chooses a fixed \(r_E \approx 0.5013\), Aaron will choose</p> \[r_A = \begin{cases} 0 &amp; \text{if } r &lt; \frac{r_E}{2} \\ \sqrt{r_E (2r - r_E)} &amp; \text{if } \frac{r_E}{2} &lt; r &lt; 1 \end{cases}\] <p>And the probability that Aaron wins is \(\approx 0.1662\).</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/fugitive-marshal/">Fugitive #1: Tracking the Fugitive with Graph-Based Deduction</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/gear-list/">Gear List 2024</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/js-202408/">Solution to the 2024 August Jane Street Puzzles</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Da Sun Handason Tam. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"About",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"Blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-teaching",title:"Teaching",description:"Courses taught at The Chinese University of Hong Kong (CUHK).",section:"Navigation",handler:()=>{window.location.href="/teaching/"}},{id:"post-fugitive-1-tracking-the-fugitive-with-graph-based-deduction",title:"Fugitive #1: Tracking the Fugitive with Graph-Based Deduction",description:"Tracking the Fugitive with Graph-Based Deduction",section:"Posts",handler:()=>{window.location.href="/blog/2024/fugitive-marshal/"}},{id:"post-gear-list-2024",title:"Gear List 2024",description:"A curated selection of my favorite ultralight and one-bag travel gear",section:"Posts",handler:()=>{window.location.href="/blog/2024/gear-list/"}},{id:"post-solution-to-the-2024-august-jane-street-puzzles",title:"Solution to the 2024 August Jane Street Puzzles",description:"Solution to the 2024 August Jane Street Puzzles",section:"Posts",handler:()=>{window.location.href="/blog/2024/js-202408/"}},{id:"post-solution-to-the-2024-april-jane-street-puzzles",title:"Solution to the 2024 April Jane Street Puzzles",description:"Solution to the 2024 April Jane Street Puzzles",section:"Posts",handler:()=>{window.location.href="/blog/2024/js-202404/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%68%61%6E%64%61%73%6F%6E%74%61%6D@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=qGkwbbYAAAAJ","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>